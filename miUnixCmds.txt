::AWK::
*Checking the existence of a user
awk -F: '/fdtst/{ print $1 }' /etc/passwd
*Remove duplicate lines from a file (unsorted)
cat scrathpad.txt | awk '!x[$0]++'
*Search for a regular expression and print second line after it
awk '/<queue name/ { print; getline; getline;print; }' ASMS-jms.xml_qs.txt | grep -v '<local-jndi-name>'


::SED::
-e "/^$/D"						- Removing empty lines from a file or piped input
sed 's/.*\/bb/bb/g' patch.log | grep 'bb'		- Removing the first string altogether
sed '/^*/,/^*/d' temp.txt				- Delete all lines between *** lines
sed '22q;d' coreAifconfig.conf				- To find the 22nd line in a file
${SED} 's#^0\([0-9]*\)#\1#g'			- Remove the leading 0

::TAR::
tar cvf unix.tar ST/*					- Creating a tar file out of a directory
tar tvf unix.tar | grep <filename>			- Seeing the contents of the tar file
tar xvf unix.tar <path-to-file_in-tar>			- Extracting a single file from a tar directory

::PS::
ps -fu $USER -T $PID - parent process is in the end	- Seeing a ps hierarchy tree

::CYGWIN::
XWin.exe -query indhp003 - Connect to x-clientclient remote server

::GENERAL::
*To show line numbers in less
less -N <file-name>
*Check the version of HP Unix s/w
uname -a
*Checking the path for any specific directory
echo $PATH | tr ':' '\n' | grep <directory-name>
*For checking generic s/w on hp machine
/usr/sbin/swlist
*For checking generic s/w on hp machine
/bin/pkginfo
*For machine info
/usr/contrib/bin/machinfo
sort -t : -k 1.7n,1.8n /etc/passwd | awk -F':' '/sptenv/{print $1}'
find . -mtime +2 -exec rm -rf {} \;
find . -name '*.jar' | grep -v tmp | xargs -l1 -t jar -tf | grep xml$ | xargs grep -l JnlpDownloadServlet -Finding a word in an xml file inside many jars
tar cvf - `ls -adrt HF_* | head -20` | gzip > foo.tar.gz
tar cvf - `ls -ad HF_* | sort | head -138`  | gzip > /tmp/foo.tar.gz
gzip `ls -adrt TTBATCH* | head -200`
du -ks ./* 2>/dev/null | sort -nr
kctune - manage kernel tunable parameters
sam - To change kernel parameters (Only by UNIX Team)
pwdx <pid> - gives current working directory of the process
stty - treminal info
stty erase ^H - Set backspace for erasing purposes
uname -svr - Gives server OS Info
host <server-name> - Gives server IP Address
nawk '/search/ {print pre, $0} {pre=$0}' .lesshst - For printing one line above
perl -p -ibak -e 's/old/new/g' *
find . -type f | /usr/local/bin/perl -lne 'print if -T' ==> Search for ascii files
find /nxttest -type f | xargs ls -s | sort -rn | awk '{size=$1/1024; printf("%dMb %s\n", size,$2);}' | head
cd $(eval echo ~$user) -> used for going to a particular users directory
*To move directories from one server to another with sym links
cd /destination/directory
ssh user@remote.host "cd /original/directory; tar cpf - ./" | tar xvf -
*To move with rsync
/usr/local/bin/rsync -zave ssh hpx615:/sprinfuser/spr/test/celltadm/*  /home/xxxx/
*To unzip a tar.bz2 file
bzip2 -cd Angus_PCExport_090728_122708.tar.bz2 | tar xvf -
bzip2 -d my_file.bz2 - to a tar file
vmstat - glance in sun

*To find if a db instance is up
ps -aef | grep pmon

*Debugging
gdb <executable> <core>

*Check for perl module
perl -mDBI

*Checking the existence of a user
cut -d':' -f1 /etc/passwd | grep <user-name>
awk -F: '/fdtst/{ print $1 }' /etc/passwd		THE AWK WAY

*For jar and war files
jar -xvf <file-name>
jar -tvf <file-name>
jar -cvf <file-name>

*For checking the symbol names in a library
nm -Ap <library-name> | grep <symbol-name>
*For finding all processes listening to specific ports
netstat -a | grep LISTEN | grep -v unix | grep '\*\.22' -->ssh processes
lsof -i :22

*For ip-address lookup
echo <server-name> | nslookup

*For oracle error:
oerr ora <ora-error-number>
drop synonym <syn-name>
create synonym <syn_name> for <db>.<table>
rename <table> to <new_table>
grant update on user_information to public;

*Prompt Color Research
Bold - echo "\033[1m$HOST\033[0m> "
Double Bold- echo "\033[5m$HOST\033[0m> "
Underline - echo "\033[4m$HOST\033[0m> "
Reverse color - echo "\033[7m$HOST\033[0m> "
Red Color - echo "\033[31m$HOST\033[0m> "
Green Color - echo "\033[32m$HOST\033[0m> "
Yellow - echo "\033[33m$HOST\033[0m> "
Violet - echo "\033[34m$HOST\033[0m> "
Pink - echo "\033[35m$HOST\033[0m> "
Blue - echo "\033[36m$HOST\033[0m> "
white - echo "\033[37m$HOST\033[0m> "
Red background - echo "\033[41m$HOST\033[0m> "
Green background - echo "\033[42m$HOST\033[0m> "
Light green background - echo "\033[43m$HOST\033[0m> "
Violet background - echo "\033[44m$HOST\033[0m> "
Pink background - echo "\033[45m$HOST\033[0m> "
Bluish green background - echo "\033[46m$HOST\033[0m> "
Gray background - echo "\033[47m$HOST\033[0m> "

#Find out why a partition cannot be unmounted (error "device is busy"): Print all PIDs with user name which currently use the mounted partition /dev/hda1.
fuser -mu /dev/hda1

#Kill all processes accessing the mounted partition /dev/hda1.	
fuser -mk /dev/hda1

#Zip file/s
zip -r9y <zip file name> <file-list>

SQL COMMANDS:
#Know privileges for the table CSM_TRB_LOG
select * from user_tab_privs where owner='SPTAPP9' and table_name='CSM_TRB_LOG'
select * from syn where table_owner like '%OPER%' and TABLE_NAME like '%LOGICAL%'
select count(*) from tab where TABTYPE='TABLE';
select count(*) from USER_ENV_PROFILE where USER_ID='51504';
Select bills.nextval from dual; (To select from a sequence bills)
select a.session_id,b.serial#,b.status,a.oracle_username,a.os_user_name,a.process,c.name ---->Checking locks on DB, has to have access to sys views
from sys.obj$ c,v$session b,v$locked_object a 
where a.session_id=b.sid and c.obj#=a.object_id and oracle_username='SPROPR11';
#Insert into a table from another table in same instance
insert into ophost select * from spropr48.ophost;
#OP settings
select CPU_ID,LOGIN_NAME,count(*) from ophost group by CPU_ID,LOGIN_NAME;
update ophost set CPU_ID='hpx604' where CPU_ID!='hpx604';
update ophost set LOGIN_NAME='sprenv20' where LOGIN_NAME!='sprenv20' OR LOGIN_NAME IS NULL;
#OP settings2
select DB_CONNECT_CODE,count(*) from jobdbconnect group by DB_CONNECT_CODE;
update jobdbconnect set DB_CONNECT_CODE='SPRREF730' where DB_CONNECT_CODE='SPRREF720'
#To select locked objects:
select * from v$locked_object;
#To select locked sessions:
select * from v$session where sid=''
#To change the password for a user
alter user ${User} identified by ${NewPass};
#To select the instance in which you are logged in
select instance_name from v$instance;
#To select the users which are logged in:
select count(*), osuser from v$session group by osuser;
#To select the character set
SELECT value$ FROM sys.props$ WHERE name = 'NLS_CHARACTERSET' ;
#to know the filesystem
select FILE_NAME,TABLESPACE_NAME from dba_data_files;
#To generate csv from oracle table
SET LINESIZE 500 FEEDBACK OFF TRIMSPOOL ON TERMOUT OFF HEAD OFF PAGESIZE 0 TERM OFF;
spool outfile.csv;
select ENV_NUM || ',' || PRODUCT || ',' || MODULE || ',' || PROPERTY || ',' || VALUE || ',' || TESTING_PHASE || ',' || SIGNATURE from enspool;
#To format a column width
column column-name format a50;

MAILX/SENDMAIL:
Debug configuration - /etc/syslog.conf
MAIN configuration - /etc/mail/sendmail.cf

mailx -s "Test Mail" AstroTransformerST@int.amdocs.com sshetty@amdocs.com

FIND COMMANDS:
#To ignore . from the output
find . ! -name . -prune -type d | tail -2 
#To find two types of file patterns
find . -name "*.xml" -o -name "*.sh" --> -o acts as the OR

KSH commands:
#To debug in ksh
set -o xtrace
set -x
#To bulk rename in ksh
for i in *.sql; do mv "$i" "$i.done"; done;
ren-regexp 's/JPG/jpg/' *
#To redirect both output and error
test.exe 2>&1 test.log


VI COMMANDS:
#Change to case-insensitive search
set ic
#Delete all lines with the word outdated
g/outdated/d
#crontab setting
VISUAL=vi

ENSIGHT COMMANDS:
EnSight_Remote sprenv ENS	
EnSight_Remote sprenv99 ENS
EnSight_Remote fdt FDT
ensGetUserModuleProperty -user SprVision930_app97:fdtst@indsun003 -module java

SOFTWARE COMMANDS:
For finding cobol version - $COBDIR/cobrun
For finding cobol fixpacks info - $COBDIR/cob32 -V
For finding cobol fixpacks info - $COBDIR/cob32 -V

ORACLE COMMANDS:
#for exp single/multiple tables, separated by comma
/oravl01/oracle/dba/dbmon/gzexp spropr48/spropr48@sprsst10 file=spropr48.dmp log=spropr48.log
/oravl01/oracle/dba/dbmon/gzexp spropr70/spropr70@nxtdev10 file=spropr70_jobdbconnect.dmp log=spropr70_jobdbconnect.log tables='jobdbconnect' 
/oravl01/oracle/dba/dbmon/gzexp ensight/ensight@nxtenb10 file=ensight_db.dmp parfile=parfile_ens.par LOG=ensight_db.log
#for imp single/multiple tables, separated by comma
/oravl01/oracle/dba/dbmon/gzimp spropr22/spropr22@sprsst10 file=sptopr11.dmp log=spropr22.dmp.log statistics=none constraints=none full=y ignore=y grants=n buffer=1024000 commit=y feedback=100000
oerr ora <ora-error-number>
drop synonym <syn-name>
create synonym <syn_name> for <db>.<table>
rename <table> to <new_table>
grant update on user_information to public;
#TO RUN SQLPLUS set below variables: 
ORACLE_HOME=/oravl01/oracle/10.2.0.4
PATH=${PATH}:${ORACLE_HOME}/bin
LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${ORACLE_HOME}/lib32
SHLIB_PATH=SHLIB_PATH:${ORACLE_HOME}/lib32

#To create a backup of a table
CREATE TABLE new_table_name [ ( column [, ...] ) ] AS SELECT [ ( column [, ...] ) ] FROM existing table_name

JAVA COMMANDS:
#for finding the jclass version
java -cp jcschart.jar com.klg.jclass.chart.JCVersion

CRM COMMANDS:
./dataex -user_name sa -password sa -db_name vmscrm20 -db_server vmscrm20 -imp /viminfrahome/vim/test/wadm/R2_TRN/ONE_TIME/skill4.dat
./RefreshDatabase.ksh - to just run schema on a split CRM DB

ABP COMMANDS:
### packing a repository
./AimPackRepository.ksh -e DCOM_XDM_BACKUP2 -t /dcomabpccuser2/Restore
AimPackRepository.ksh -u DCOM_XDM_BACKUP2
### unlocking the amcAdmin user
Login with root/Root00 and go to security->Users->Unlock->save
### MRO
#MRO variables
AMC_NO_MRO=on
ABP_MRO_PORT=10351
AMC_MRO_PORT=10351
#Billing configuartion
SQL> select * from bl1_inv_machine;
#Debug to be enabled in (change from fatal to debug)
amc1_Logger.xml

lsof |grep FS|sort -n -k 7

# mysqldump ---user [user name] ---password=[password]  
# [database name] > [dump file] 

If I am in some directory called /dir1 and I want to create that same structure in /dir2, but don't want to copy files:
$ mkdir /dir2
$ cd /dir1
$ find . -type d | cpio -pvdm ../dir2

###To check for passwordless ssh setup - if setup or not
STATUS=$(ssh -q -o 'PreferredAuthentications=publickey' omswrk74@hpxi014 "echo";echo $?)

\\indiafs1\infra$\DvciPMP\2.0 PMP\2.2 Projects Supported\2.2.2 ABP\2.2.2.14 Vodafone India\2.2.2.14.4 Configuration\2.2.2.14.4.5 Installation - Site - Production  machine

#To extract the 7z files
7za x dpupdate.7z --extract with directory names
7za e dpupdate.7z --extract with directory names
p7zip -d <7zip file>

#To get server ip from the logical name
nslookup -q=A



GENERAL:
lsof -u $LOGNAME | grep 'OMS_JMS_1.out' | awk '{ print $NF }' | sort | uniq